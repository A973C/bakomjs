/*
 * @preserve
 * bakom.js 1.1
 * http://erikportin.com/bakomjs
 *
 * Copyright 2013 Erik Portin
 * Released under the MIT license
 * https://github.com/erikportin/bakomjs/blob/master/LICENCE.md
 */
window.Bakom=function(e){var t=this,n=function(){var e=document.createElement("x-test");return typeof e.style.webkitBackgroundClip!=="undefined"&&(e.style.webkitBackgroundClip="text",e.style.webkitBackgroundClip==="text")||typeof e.style.backgroundClip!=="undefined"&&(e.style.backgroundClip="text",e.style.backgroundClip==="text")},o="",l=false,r=n(),i={},a,u,s={},c={backgroundSelector:"body",textSelector:"",styleClass:"",dy:"",dx:"",backgroundClipSupportOnly:true};var p=function(e){var t=function(){var e=function(){var e=document.defaultView.getComputedStyle(i.element,null).getPropertyValue("background-image"),n="",o=[],l=document.defaultView.getComputedStyle(i.element,null).getPropertyValue("background-attachment");if(!c.backgroundClipSupportOnly){var r=document.defaultView.getComputedStyle(i.element,null).getPropertyValue("background-repeat");if(r!=="no-repeat"){console.warn('BAKOM.JS: background-repeat is set to "'+r+'" which can cause issues for browsers not supporting Background Clip. Set property to "no-repeat" to avoid this warning.')}if(l!=="scroll"){console.warn('BAKOM.JS: background-attachment is set to "'+l+'" which is not supported. Set property to "scroll" to avoid this warning.')}}if(e&&e!=="none"){n=document.defaultView.getComputedStyle(i.element,null).getPropertyValue("background-position").split(" ");o=document.defaultView.getComputedStyle(i.element,null).getPropertyValue("background-size").split(" ");e=e.slice(e.indexOf("url(")+4,e.lastIndexOf(")"));i.pos=t();if(l==="fixed"){a.pos.top=0;a.pos.left=0}i.prop={src:e,x:parseInt(n[0],10),y:parseInt(n[1],10),size:{width:parseInt(o[0],10),height:parseInt(o[1],10)},backgroundAttachment:l};return true}else{console.error("BAKOM.JS: Unable to find a background image for "+i.element);return false}},t=function(){return{bottom:i.element.getBoundingClientRect().bottom,height:i.element.getBoundingClientRect().height,left:i.element.getBoundingClientRect().left,right:i.element.getBoundingClientRect().right,top:i.element.getBoundingClientRect().top,width:i.element.getBoundingClientRect().width}};if(!c.backgroundSelector){console.error("BAKOM.JS: Background element selector not set");return false}i.element=document.querySelectorAll(c.backgroundSelector)[0];if(i.element){return e()}else{console.error("BAKOM.JS: Unable to find background element "+c.backgroundSelector);return false}},n=function(){if(!c.textSelector){console.error("BAKOM.JS: Text element selector not set"+c.textSelector);return false}var e=document.querySelectorAll(c.textSelector)[0];if(e){a={element:e,pos:{left:e.getBoundingClientRect().left,top:e.getBoundingClientRect().top,width:e.getBoundingClientRect().width,height:e.getBoundingClientRect().height}};if(!c.styleClass)c.styleClass=e.className.slice(0);return true}else{console.error("BAKOM.JS: Unable to find text element "+c.textSelector);return false}};for(var l in e){if(c.hasOwnProperty(l)&&e.hasOwnProperty(l)){c[l]=e[l]}}var r=0;while(document.getElementById("bakom-cp-"+r)){r++}o="bakom-cp-"+r;return n()&&t()},d=function(){var e=function(e){var t=document.createElement("div");t.innerHTML=e;return t.firstChild},t=function(){var t='<svg width="'+a.pos.width+'" height="'+a.pos.height+'">'+"<image "+"xlink:href="+i.prop.src+'width="'+i.prop.size.width+'"'+'height="'+i.prop.size.height+'"'+'clip-path="url(#'+o+')"'+'x="'+(i.pos.left-a.pos.left+i.prop.x)+'"'+'y="'+(i.pos.top-a.pos.top+i.prop.y)+'"'+">"+"</image>"+"</svg>";u=a.element.innerHTML;a.element.innerHTML="";s.image=e(t);a.element.appendChild(s.image)},n=function(){var t='<svg style="position: absolute; top: 0; left:0; z-index: -1;">'+"<defs>"+'<clipPath id="'+o+'">'+'<text text-anchor="start" x="0" dy="'+c.dy+'dx="'+c.dx+'" class="'+c.styleClass+'">'+a.element.innerHTML+"</text>"+"</clipPath>"+"</defs>"+"</svg>";s.clipPath=e(t);document.body.appendChild(s.clipPath)};n();t();l=true},g=function(){a.style={};a.style.backgroundPosition=a.element.style.backgroundPosition;a.style.backgroundImage=a.element.style.backgroundImage;a.style.webkitBackgroundClip=a.element.style.webkitBackgroundClip;a.style.backgroundClip=a.element.style.backgroundClip;a.style.color=a.element.style.color;a.style.backgroundAttachment=a.element.style.backgroundAttachment;a.element.style.backgroundPosition=i.pos.left-a.pos.left+i.prop.x+"px "+(i.pos.top-a.pos.top+i.prop.y)+"px";a.element.style.backgroundSize=i.prop.size.width+"px "+i.prop.size.height+"px";a.element.style.backgroundImage="url("+i.prop.src+")";a.element.style.webkitBackgroundClip="text";a.element.style.backgroundClip="text";a.element.style.color="rgba(0, 0, 0, 0)";a.element.style.backgroundAttachment=i.prop.backgroundAttachment;l=true},m=function(){for(var e in a.style){a.element.style[e]=a.style[e]}},f=function(){for(var e in s){s[e].parentNode.removeChild(s[e])}},y=function(){a.element.innerHTML=u},h=function(e){if(p(e)){if(r)g();else if(!c.backgroundClipSupportOnly)d()}else{console.error("BAKOM.JS: Something went wrong in the setup. Either the background or text element selector wasn't set or one of the element wasn't found")}},k=function(){if(l){if(r)m();else{f();y()}}};if(e.backgroundClipSupportOnly&&r||!e.backgroundClipSupportOnly)h(e);t.reset=function(){k()};t.redraw=function(e){if(l){k();h(e)}};t.hasBackgroundClipSupport=function(){return r}};
//# sourceMappingURL=bakom.sourcemap