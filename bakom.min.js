/*
 * @preserve
 * bakom.js 1.1
 * http://erikportin.com/bakomjs
 *
 * Copyright 2013 Erik Portin
 * Released under the MIT license
 * https://github.com/erikportin/bakomjs/blob/master/LICENCE.md
 */
window.Bakom=function(){var a,b,c=this,d={},e="",f={backgroundSelector:"body",textSelector:"",styleClass:"",dy:"",dx:"",backgroundClipSupportOnly:!0,debug:!1},g=function(){var a=document.createElement("x-test");return"undefined"!=typeof a.style.webkitBackgroundClip&&(a.style.webkitBackgroundClip="text","text"===a.style.webkitBackgroundClip)||"undefined"!=typeof a.style.backgroundClip&&(a.style.backgroundClip="text","text"===a.style.backgroundClip)},h=function(b,g){var h=function(){var b=function(){var b=document.defaultView.getComputedStyle(d.element,null).getPropertyValue("background-image"),c="",g=[],h=document.defaultView.getComputedStyle(d.element,null).getPropertyValue("background-attachment");if(!f.backgroundClipSupportOnly){var i=document.defaultView.getComputedStyle(d.element,null).getPropertyValue("background-repeat");"no-repeat"!==i&&f.debug&&console.warn('BAKOM.JS: background-repeat is set to "'+i+'" which can cause issues for browsers not supporting Background Clip. Set property to "no-repeat" to avoid this warning.'),"scroll"!==h&&f.debug&&console.warn('BAKOM.JS: background-attachment is set to "'+h+'" which is not supported. Set property to "scroll" to avoid this warning.')}return b&&"none"!==b?(c=document.defaultView.getComputedStyle(d.element,null).getPropertyValue("background-position").split(" "),g=document.defaultView.getComputedStyle(d.element,null).getPropertyValue("background-size").split(" "),b=b.slice(b.indexOf("url(")+4,b.lastIndexOf(")")),d.pos=e(),"fixed"===h&&(a.pos.top=0,a.pos.left=0,d.pos.top=0,d.pos.left=0),d.prop={src:b,x:parseInt(c[0],10),y:parseInt(c[1],10),size:{width:parseInt(g[0],10),height:parseInt(g[1],10)},backgroundAttachment:h},!0):(console.error("BAKOM.JS: Unable to find a background image for "+d.element),!1)},e=function(){return{bottom:d.element.getBoundingClientRect().bottom,height:d.element.getBoundingClientRect().height,left:d.element.getBoundingClientRect().left,right:d.element.getBoundingClientRect().right,top:d.element.getBoundingClientRect().top,width:d.element.getBoundingClientRect().width}};return f.backgroundSelector?(d.element=c.backgroundElement=document.querySelectorAll(f.backgroundSelector)[0],d.element?b():(console.error("BAKOM.JS: Unable to find background element "+f.backgroundSelector),!1)):(console.error("BAKOM.JS: Background element selector not set"),!1)},i=function(){if(!b)return console.error("BAKOM.JS: Text element selector not set"),!1;var d=c.textElement=document.querySelectorAll(b)[0];return d?(a={element:d,pos:{left:d.getBoundingClientRect().left,top:d.getBoundingClientRect().top,width:d.getBoundingClientRect().width,height:d.getBoundingClientRect().height}},f.styleClass||(f.styleClass=d.className.slice(0)),!0):(console.error("BAKOM.JS: Unable to find text element "+f.textSelector),!1)};for(var j in g)f.hasOwnProperty(j)&&g.hasOwnProperty(j)&&(f[j]=g[j]);for(var k=0;document.getElementById("bakom-cp-"+k);)k++;return e="bakom-cp-"+k,i()&&h()},i=function(){var g=function(a){var b=document.createElement("div");return b.innerHTML=a,b.firstChild},h=function(){var f='<svg width="'+a.pos.width+'" height="'+a.pos.height+'"><image xlink:href='+d.prop.src+'width="'+d.prop.size.width+'"height="'+d.prop.size.height+'"clip-path="url(#'+e+')"x="'+(d.pos.left-a.pos.left+d.prop.x)+'"y="'+(d.pos.top-a.pos.top+d.prop.y)+'"></image></svg>';b=a.element.innerHTML,a.element.innerHTML="",c.svgs.image=g(f),a.element.appendChild(c.svgs.image)},i=function(){var b='<svg style="position: absolute; top: 0; left:0; z-index: -1;"><defs><clipPath id="'+e+'"><text text-anchor="start" x="0" dy="'+f.dy+'" dx="'+f.dx+'" class="'+f.styleClass+'">'+a.element.innerHTML+"</text></clipPath></defs></svg>";c.svgs.clipPath=g(b),document.body.appendChild(c.svgs.clipPath)};i(),h(),c.hasBeenDrawn=!0},j=function(){a.style={},a.style.backgroundPosition=a.element.style.backgroundPosition,a.style.backgroundImage=a.element.style.backgroundImage,a.style.webkitBackgroundClip=a.element.style.webkitBackgroundClip,a.style.backgroundClip=a.element.style.backgroundClip,a.style.color=a.element.style.color,a.style.backgroundAttachment=a.element.style.backgroundAttachment,a.element.style.backgroundPosition=d.pos.left-a.pos.left+d.prop.x+"px "+(d.pos.top-a.pos.top+d.prop.y)+"px",a.element.style.backgroundSize=d.prop.size.width+"px "+d.prop.size.height+"px",a.element.style.backgroundImage="url("+d.prop.src+")",a.element.style.webkitBackgroundClip="text",a.element.style.backgroundClip="text",a.element.style.color="rgba(0, 0, 0, 0)",a.element.style.backgroundAttachment=d.prop.backgroundAttachment,c.hasBeenDrawn=!0},k=function(){for(var b in a.style)a.element.style[b]=a.style[b]},l=function(){for(var a in c.svgs)c.svgs[a].parentNode.removeChild(c.svgs[a])},m=function(){a.element.innerHTML=b},n=function(a,b){h(a,b)?c.hasBackgroundClipSupport?j():f.backgroundClipSupportOnly||(!f.dy&&f.debug&&console.warn("BAKOM.JS: no dy value set. Please read the documentation for bakom.js to find out why this isn't a good idea."),i()):console.error("BAKOM.JS: Something went wrong in the setup. Either the background or text element selector wasn't set or one of the element wasn't found")},o=function(){c.hasBeenDrawn&&(c.hasBackgroundClipSupport?k():(l(),m()))};c.hasBeenDrawn=!1,c.hasBackgroundClipSupport=g(),c.svgs={},c.textElement=void 0,c.backgroundElement=void 0,c.init=function(a,b){var b=b||{};return(b.backgroundClipSupportOnly!==!1&&c.hasBackgroundClipSupport||b.backgroundClipSupportOnly===!1)&&n(a,b),c},c.reset=function(){return o(),c},c.redraw=function(a,b){return c.hasBeenDrawn&&(o(),n(a,b)),setState(),c}};
//# sourceMappingURL=bakom.source-map.js