/*
 * @preserve
 * bakom.js 1.1
 * http://erikportin.com/bakomjs
 *
 * Copyright 2013 Erik Portin
 * Released under the MIT license
 * https://github.com/erikportin/bakomjs/blob/master/LICENCE.md
 */
window.Bakom=function(){var a,b,c=this,d={},e=function(){var a=document.createElement("x-test");return"undefined"!=typeof a.style.webkitBackgroundClip&&(a.style.webkitBackgroundClip="text","text"===a.style.webkitBackgroundClip)||"undefined"!=typeof a.style.backgroundClip&&(a.style.backgroundClip="text","text"===a.style.backgroundClip)},f="",g=!1,h=e(),i={},j={},k={backgroundSelector:"body",textSelector:"",styleClass:"",dy:"",dx:"",backgroundClipSupportOnly:!0,debug:!1},l=function(b){var c=function(){var b=function(){var b=document.defaultView.getComputedStyle(i.element,null).getPropertyValue("background-image"),d="",e=[],f=document.defaultView.getComputedStyle(i.element,null).getPropertyValue("background-attachment");if(!k.backgroundClipSupportOnly){var g=document.defaultView.getComputedStyle(i.element,null).getPropertyValue("background-repeat");"no-repeat"!==g&&k.debug&&console.warn('BAKOM.JS: background-repeat is set to "'+g+'" which can cause issues for browsers not supporting Background Clip. Set property to "no-repeat" to avoid this warning.'),"scroll"!==f&&k.debug&&console.warn('BAKOM.JS: background-attachment is set to "'+f+'" which is not supported. Set property to "scroll" to avoid this warning.')}return b&&"none"!==b?(d=document.defaultView.getComputedStyle(i.element,null).getPropertyValue("background-position").split(" "),e=document.defaultView.getComputedStyle(i.element,null).getPropertyValue("background-size").split(" "),b=b.slice(b.indexOf("url(")+4,b.lastIndexOf(")")),i.pos=c(),"fixed"===f&&(a.pos.top=0,a.pos.left=0,i.pos.top=0,i.pos.left=0),i.prop={src:b,x:parseInt(d[0],10),y:parseInt(d[1],10),size:{width:parseInt(e[0],10),height:parseInt(e[1],10)},backgroundAttachment:f},!0):(console.error("BAKOM.JS: Unable to find a background image for "+i.element),!1)},c=function(){return{bottom:i.element.getBoundingClientRect().bottom,height:i.element.getBoundingClientRect().height,left:i.element.getBoundingClientRect().left,right:i.element.getBoundingClientRect().right,top:i.element.getBoundingClientRect().top,width:i.element.getBoundingClientRect().width}};return k.backgroundSelector?(i.element=document.querySelectorAll(k.backgroundSelector)[0],i.element?b():(console.error("BAKOM.JS: Unable to find background element "+k.backgroundSelector),!1)):(console.error("BAKOM.JS: Background element selector not set"),!1)},d=function(){if(!k.textSelector)return console.error("BAKOM.JS: Text element selector not set"+k.textSelector),!1;var b=document.querySelectorAll(k.textSelector)[0];return b?(a={element:b,pos:{left:b.getBoundingClientRect().left,top:b.getBoundingClientRect().top,width:b.getBoundingClientRect().width,height:b.getBoundingClientRect().height}},k.styleClass||(k.styleClass=b.className.slice(0)),!0):(console.error("BAKOM.JS: Unable to find text element "+k.textSelector),!1)};for(var e in b)k.hasOwnProperty(e)&&b.hasOwnProperty(e)&&(k[e]=b[e]);for(var g=0;document.getElementById("bakom-cp-"+g);)g++;return f="bakom-cp-"+g,d()&&c()},m=function(){var c=function(a){var b=document.createElement("div");return b.innerHTML=a,b.firstChild},d=function(){var d='<svg width="'+a.pos.width+'" height="'+a.pos.height+'"><image xlink:href='+i.prop.src+'width="'+i.prop.size.width+'"height="'+i.prop.size.height+'"clip-path="url(#'+f+')"x="'+(i.pos.left-a.pos.left+i.prop.x)+'"y="'+(i.pos.top-a.pos.top+i.prop.y)+'"></image></svg>';b=a.element.innerHTML,a.element.innerHTML="",j.image=c(d),a.element.appendChild(j.image)},e=function(){var b='<svg style="position: absolute; top: 0; left:0; z-index: -1;"><defs><clipPath id="'+f+'"><text text-anchor="start" x="0" dy="'+k.dy+'" dx="'+k.dx+'" class="'+k.styleClass+'">'+a.element.innerHTML+"</text></clipPath></defs></svg>";j.clipPath=c(b),document.body.appendChild(j.clipPath)};e(),d(),g=!0},n=function(){a.style={},a.style.backgroundPosition=a.element.style.backgroundPosition,a.style.backgroundImage=a.element.style.backgroundImage,a.style.webkitBackgroundClip=a.element.style.webkitBackgroundClip,a.style.backgroundClip=a.element.style.backgroundClip,a.style.color=a.element.style.color,a.style.backgroundAttachment=a.element.style.backgroundAttachment,a.element.style.backgroundPosition=i.pos.left-a.pos.left+i.prop.x+"px "+(i.pos.top-a.pos.top+i.prop.y)+"px",a.element.style.backgroundSize=i.prop.size.width+"px "+i.prop.size.height+"px",a.element.style.backgroundImage="url("+i.prop.src+")",a.element.style.webkitBackgroundClip="text",a.element.style.backgroundClip="text",a.element.style.color="rgba(0, 0, 0, 0)",a.element.style.backgroundAttachment=i.prop.backgroundAttachment,g=!0},o=function(){for(var b in a.style)a.element.style[b]=a.style[b]},p=function(){for(var a in j)j[a].parentNode.removeChild(j[a])},q=function(){a.element.innerHTML=b},r=function(){l(d)?h?n():k.backgroundClipSupportOnly||(!k.dy&&k.debug&&console.warn("BAKOM.JS: no dy value set. Please read the documentation for bakom.js to find out why this isn't a good idea."),m()):console.error("BAKOM.JS: Something went wrong in the setup. Either the background or text element selector wasn't set or one of the element wasn't found")},s=function(){g&&(h?o():(p(),q()))},t=function(){c.hasBeenDrawn=g,c.hasBackgroundClipSupport=h,c.svgs=j,c.textElement=a?a.element:void 0,c.backgroundElement=i?i.element:void 0};t(),c.init=function(a){return d=a,(d.backgroundClipSupportOnly&&h||!d.backgroundClipSupportOnly)&&r(),t(),c},c.reset=function(){return s(),t(),c},c.redraw=function(a){return g&&(d=a,s(),r(d)),t(),c}};
//# sourceMappingURL=bakom.source-map.js