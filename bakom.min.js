/*
 * @preserve
 * bakom.js 1.1
 * http://erikportin.com/bakomjs
 *
 * Copyright 2013 Erik Portin
 * Released under the MIT license
 * https://github.com/erikportin/bakomjs/blob/master/LICENCE.md
 */
window.Bakom=function(){var a,b,c,d=this,e={},f="",g={backgroundSelector:"body",styleClass:"",dy:"",dx:"",backgroundClipSupportOnly:!0,debug:!1},h=function(){var a=document.createElement("x-test");return"undefined"!=typeof a.style.webkitBackgroundClip&&(a.style.webkitBackgroundClip="text","text"===a.style.webkitBackgroundClip)||"undefined"!=typeof a.style.backgroundClip&&(a.style.backgroundClip="text","text"===a.style.backgroundClip)},i=function(b,c){var h=function(){var b=function(){var b=document.defaultView.getComputedStyle(e.element,null).getPropertyValue("background-image"),d="",f=[],h=document.defaultView.getComputedStyle(e.element,null).getPropertyValue("background-attachment");if(!g.backgroundClipSupportOnly){var i=document.defaultView.getComputedStyle(e.element,null).getPropertyValue("background-repeat");"no-repeat"!==i&&g.debug&&console.warn('BAKOM.JS: background-repeat is set to "'+i+'" which can cause issues for browsers not supporting Background Clip. Set property to "no-repeat" to avoid this warning.'),"scroll"!==h&&g.debug&&console.warn('BAKOM.JS: background-attachment is set to "'+h+'" which is not supported. Set property to "scroll" to avoid this warning.')}return b&&"none"!==b?(d=document.defaultView.getComputedStyle(e.element,null).getPropertyValue("background-position").split(" "),f=document.defaultView.getComputedStyle(e.element,null).getPropertyValue("background-size").split(" "),b=b.slice(b.indexOf("url(")+4,b.lastIndexOf(")")),e.pos=c(),"fixed"===h&&(a.pos.top=0,a.pos.left=0,e.pos.top=0,e.pos.left=0),e.prop={src:b,x:parseInt(d[0],10),y:parseInt(d[1],10),size:{width:parseInt(f[0],10),height:parseInt(f[1],10)},backgroundAttachment:h},!0):(console.error("BAKOM.JS: Unable to find a background image for "+e.element),!1)},c=function(){return{bottom:e.element.getBoundingClientRect().bottom,height:e.element.getBoundingClientRect().height,left:e.element.getBoundingClientRect().left,right:e.element.getBoundingClientRect().right,top:e.element.getBoundingClientRect().top,width:e.element.getBoundingClientRect().width}};return g.backgroundSelector?(e.element=d.backgroundElement=document.querySelectorAll(g.backgroundSelector)[0],e.element?b():(console.error("BAKOM.JS: Unable to find background element "+g.backgroundSelector),!1)):(console.error("BAKOM.JS: Background element selector not set"),!1)},i=function(){if(!b)return console.error("BAKOM.JS: Text element selector not set"),!1;var c=d.textElement=document.querySelectorAll(b)[0];return c?(a={element:c,pos:{left:c.getBoundingClientRect().left,top:c.getBoundingClientRect().top,width:c.getBoundingClientRect().width,height:c.getBoundingClientRect().height}},g.styleClass||(g.styleClass=c.className.slice(0)),!0):(console.error("BAKOM.JS: Unable to find text element "+g.textSelector),!1)};for(var j in c)g.hasOwnProperty(j)&&c.hasOwnProperty(j)&&(g[j]=c[j]);for(var k=0;document.getElementById("bakom-cp-"+k);)k++;return f="bakom-cp-"+k,i()&&h()},j=function(){var b=function(a){var b=document.createElement("div");return b.innerHTML=a,b.firstChild},h=function(){var g='<svg width="'+a.pos.width+'" height="'+a.pos.height+'"><image xlink:href='+e.prop.src+'width="'+e.prop.size.width+'"height="'+e.prop.size.height+'"clip-path="url(#'+f+')"x="'+(e.pos.left-a.pos.left+e.prop.x)+'"y="'+(e.pos.top-a.pos.top+e.prop.y)+'"></image></svg>';c=a.element.innerHTML,a.element.innerHTML="",d.svgs.image=b(g),a.element.appendChild(d.svgs.image)},i=function(){var c='<svg style="position: absolute; top: 0; left:0; z-index: -1;"><defs><clipPath id="'+f+'"><text text-anchor="start" x="0" dy="'+g.dy+'" dx="'+g.dx+'" class="'+g.styleClass+'">'+a.element.innerHTML+"</text></clipPath></defs></svg>";d.svgs.clipPath=b(c),document.body.appendChild(d.svgs.clipPath)};i(),h(),d.hasBeenDrawn=!0},k=function(){a.style={},a.style.backgroundPosition=a.element.style.backgroundPosition,a.style.backgroundImage=a.element.style.backgroundImage,a.style.webkitBackgroundClip=a.element.style.webkitBackgroundClip,a.style.backgroundClip=a.element.style.backgroundClip,a.style.color=a.element.style.color,a.style.backgroundAttachment=a.element.style.backgroundAttachment,a.element.style.backgroundPosition=e.pos.left-a.pos.left+e.prop.x+"px "+(e.pos.top-a.pos.top+e.prop.y)+"px",a.element.style.backgroundSize=e.prop.size.width+"px "+e.prop.size.height+"px",a.element.style.backgroundImage="url("+e.prop.src+")",a.element.style.webkitBackgroundClip="text",a.element.style.backgroundClip="text",a.element.style.color="rgba(0, 0, 0, 0)",a.element.style.backgroundAttachment=e.prop.backgroundAttachment,d.hasBeenDrawn=!0},l=function(){for(var b in a.style)a.element.style[b]=a.style[b]},m=function(){for(var a in d.svgs)d.svgs[a].parentNode.removeChild(d.svgs[a])},n=function(){a.element.innerHTML=c},o=function(a,c){b=a,i(a,c)?d.hasBackgroundClipSupport?k():g.backgroundClipSupportOnly||(!g.dy&&g.debug&&console.warn("BAKOM.JS: no dy value set. Please read the documentation for bakom.js to find out why this isn't a good idea."),j()):console.error("BAKOM.JS: Something went wrong in the setup. Either the background or text element selector wasn't set or one of the element wasn't found")},p=function(){d.hasBeenDrawn&&(d.hasBackgroundClipSupport?l():(m(),n()))};d.hasBeenDrawn=!1,d.hasBackgroundClipSupport=h(),d.svgs={},d.textElement=void 0,d.backgroundElement=void 0,d.init=function(a,b){var b=b||{};return(b.backgroundClipSupportOnly!==!1&&d.hasBackgroundClipSupport||b.backgroundClipSupportOnly===!1)&&o(a,b),d},d.reset=function(){return p(),d},d.redraw=function(){return d.hasBeenDrawn&&(p(),o(b,g)),d}};
//# sourceMappingURL=bakom.source-map.js