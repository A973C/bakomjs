/*
 * @preserve
 * bakom.js 1.1
 * http://erikportin.com/bakomjs
 *
 * Copyright 2013 Erik Portin
 * Released under the MIT license
 * https://github.com/erikportin/bakomjs/blob/master/LICENCE.md
 */
window.Bakom=function(){var a,b,c=this,d=function(){var a=document.createElement("x-test");return"undefined"!=typeof a.style.webkitBackgroundClip&&(a.style.webkitBackgroundClip="text","text"===a.style.webkitBackgroundClip)||"undefined"!=typeof a.style.backgroundClip&&(a.style.backgroundClip="text","text"===a.style.backgroundClip)},e="",f=!1,g=d(),h={},i={},j={backgroundSelector:"body",textSelector:"",styleClass:"",dy:"",dx:"",backgroundClipSupportOnly:!0,debug:!1},k=function(b,c){var d=function(){var b=function(){var b=document.defaultView.getComputedStyle(h.element,null).getPropertyValue("background-image"),d="",e=[],f=document.defaultView.getComputedStyle(h.element,null).getPropertyValue("background-attachment");if(!j.backgroundClipSupportOnly){var g=document.defaultView.getComputedStyle(h.element,null).getPropertyValue("background-repeat");"no-repeat"!==g&&j.debug&&console.warn('BAKOM.JS: background-repeat is set to "'+g+'" which can cause issues for browsers not supporting Background Clip. Set property to "no-repeat" to avoid this warning.'),"scroll"!==f&&j.debug&&console.warn('BAKOM.JS: background-attachment is set to "'+f+'" which is not supported. Set property to "scroll" to avoid this warning.')}return b&&"none"!==b?(d=document.defaultView.getComputedStyle(h.element,null).getPropertyValue("background-position").split(" "),e=document.defaultView.getComputedStyle(h.element,null).getPropertyValue("background-size").split(" "),b=b.slice(b.indexOf("url(")+4,b.lastIndexOf(")")),h.pos=c(),"fixed"===f&&(a.pos.top=0,a.pos.left=0,h.pos.top=0,h.pos.left=0),h.prop={src:b,x:parseInt(d[0],10),y:parseInt(d[1],10),size:{width:parseInt(e[0],10),height:parseInt(e[1],10)},backgroundAttachment:f},!0):(console.error("BAKOM.JS: Unable to find a background image for "+h.element),!1)},c=function(){return{bottom:h.element.getBoundingClientRect().bottom,height:h.element.getBoundingClientRect().height,left:h.element.getBoundingClientRect().left,right:h.element.getBoundingClientRect().right,top:h.element.getBoundingClientRect().top,width:h.element.getBoundingClientRect().width}};return j.backgroundSelector?(h.element=document.querySelectorAll(j.backgroundSelector)[0],h.element?b():(console.error("BAKOM.JS: Unable to find background element "+j.backgroundSelector),!1)):(console.error("BAKOM.JS: Background element selector not set"),!1)},f=function(){if(!b)return console.error("BAKOM.JS: Text element selector not set"+j.textSelector),!1;var c=document.querySelectorAll(b)[0];return c?(a={element:c,pos:{left:c.getBoundingClientRect().left,top:c.getBoundingClientRect().top,width:c.getBoundingClientRect().width,height:c.getBoundingClientRect().height}},j.styleClass||(j.styleClass=c.className.slice(0)),!0):(console.error("BAKOM.JS: Unable to find text element "+j.textSelector),!1)};for(var g in c)j.hasOwnProperty(g)&&c.hasOwnProperty(g)&&(j[g]=c[g]);for(var i=0;document.getElementById("bakom-cp-"+i);)i++;return e="bakom-cp-"+i,f()&&d()},l=function(){var c=function(a){var b=document.createElement("div");return b.innerHTML=a,b.firstChild},d=function(){var d='<svg width="'+a.pos.width+'" height="'+a.pos.height+'"><image xlink:href='+h.prop.src+'width="'+h.prop.size.width+'"height="'+h.prop.size.height+'"clip-path="url(#'+e+')"x="'+(h.pos.left-a.pos.left+h.prop.x)+'"y="'+(h.pos.top-a.pos.top+h.prop.y)+'"></image></svg>';b=a.element.innerHTML,a.element.innerHTML="",i.image=c(d),a.element.appendChild(i.image)},g=function(){var b='<svg style="position: absolute; top: 0; left:0; z-index: -1;"><defs><clipPath id="'+e+'"><text text-anchor="start" x="0" dy="'+j.dy+'" dx="'+j.dx+'" class="'+j.styleClass+'">'+a.element.innerHTML+"</text></clipPath></defs></svg>";i.clipPath=c(b),document.body.appendChild(i.clipPath)};g(),d(),f=!0},m=function(){a.style={},a.style.backgroundPosition=a.element.style.backgroundPosition,a.style.backgroundImage=a.element.style.backgroundImage,a.style.webkitBackgroundClip=a.element.style.webkitBackgroundClip,a.style.backgroundClip=a.element.style.backgroundClip,a.style.color=a.element.style.color,a.style.backgroundAttachment=a.element.style.backgroundAttachment,a.element.style.backgroundPosition=h.pos.left-a.pos.left+h.prop.x+"px "+(h.pos.top-a.pos.top+h.prop.y)+"px",a.element.style.backgroundSize=h.prop.size.width+"px "+h.prop.size.height+"px",a.element.style.backgroundImage="url("+h.prop.src+")",a.element.style.webkitBackgroundClip="text",a.element.style.backgroundClip="text",a.element.style.color="rgba(0, 0, 0, 0)",a.element.style.backgroundAttachment=h.prop.backgroundAttachment,f=!0},n=function(){for(var b in a.style)a.element.style[b]=a.style[b]},o=function(){for(var a in i)i[a].parentNode.removeChild(i[a])},p=function(){a.element.innerHTML=b},q=function(a,b){k(a,b)?g?m():j.backgroundClipSupportOnly||(!j.dy&&j.debug&&console.warn("BAKOM.JS: no dy value set. Please read the documentation for bakom.js to find out why this isn't a good idea."),l()):console.error("BAKOM.JS: Something went wrong in the setup. Either the background or text element selector wasn't set or one of the element wasn't found")},r=function(){f&&(g?n():(o(),p()))},s=function(){c.hasBeenDrawn=f,c.hasBackgroundClipSupport=g,c.svgs=i,c.textElement=a?a.element:void 0,c.backgroundElement=h?h.element:void 0};s(),c.init=function(a,b){return(b.backgroundClipSupportOnly!==!1&&g||b.backgroundClipSupportOnly===!1)&&q(a,b),s(),c},c.reset=function(){return r(),s(),c},c.redraw=function(a,b){return f&&(r(),q(a,b)),s(),c}};
//# sourceMappingURL=bakom.source-map.js